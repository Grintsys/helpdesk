<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
<div class="breadcrumb-container d-flex mb-10">
</div>

<script>
	// TODO: use server side rendering instead
	frappe.ready(function() {
		frappe.call({
			method: "helpdesk.templates.components.breadcrumbs.breadcrumbs.get_breadcrumbs",
			args: {
				route: window.location.href.toString().split(window.location.host)[1] 
			},
			callback: function(r) {
				let parents = r.message
				let breadcrumbContainer = $(".breadcrumb-container");
				breadcrumbContainer.append(`
					<a href='/support/kb/'>Home</a>
				`);
				if(parents) {
					for(var i = 0; i < parents.length; i++) {
						console.log(parents[i]["route"])
						breadcrumbContainer.append(`
							<i class="px-2 bi bi-chevron-right"></i>
							${
								i < parents.length - 1 ? 
								`<a href='${parents[i]["route"]}'>${parents[i]["label"]}</a>`:
								`<span>${parents[i]["label"]}</span>`
							}
						`)
					}
				}
			}
		})
	})
</script>